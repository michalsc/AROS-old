/*
    (C) 1995-1999 AROS - The Amiga Research OS
    $Id$

    Desc: VGA driver for AROS
    Lang: english
*/

#define VERSION		"$VER: vga 1.0 (25.8.1999)"
#define NAME		"VGA card driver"

static const char version[];
static const char name[];
static char mode_640x480x4[];
static char mode_320x200x8[];
static const char DefPal[];

extern void SetVGAMode(char * Parameters);
extern void SetVGAPal(char * Pal, char first, int count);
extern unsigned char AROS_logo[];
extern void xputc(char chr,int num);

static const char version[] = VERSION;
static const char name[] = NAME;

struct ModeDesc {
    char *	Name;
    char *	Parameters;
    };

char mode_640x480x4[63]={
    0x00,0x01,0x02,0x03,0x04,
    0x05,0x06,0x07,0x08,0x09,
    0x0a,0x0b,0x0c,0x0d,0x0e,
    0x0f,
    0x01,0x00,0x0f,0x00,0x00,	// 0x03c0
    0xe3,			// 0x03c2
    0x03,0x01,0x0f,0x00,0x06,	// 0x03c4
    0xff,0x00,			// 0x03c6,0x03da
    0x00,0x00,0x00,0x00,0x00,
    0x00,0x05,0x0f,0xff,	// 0x03ce
    0x5f,0x4f,0x50,0x82,0x54,
    0x80,0x0b,0x3e,0x00,0x40,
    0x00,0x00,0x00,0x00,0x00,
    0x00,0xea,0x8c,0xdf,0x28,	// 0x03d4
    0x00,0xe7,0x04,0xe3,0xff};

char mode_320x200x8[47]={
    0x41,0x00,0x0f,0x00,0x00,	// 0x03c0
    0x63,			// 0x03c2
    0x03,0x01,0x0f,0x00,0x0e,	// 0x03c4
    0xff,0x00,			// 0x03c6,0x03da
    0x00,0x00,0x00,0x00,0x00,
    0x40,0x01,0x0f,0xff,	// 0x03ce
    0x5f,0x4f,0x50,0x82,0x54,
    0x80,0xbf,0x1f,0x00,0x41,
    0x00,0x00,0x00,0x00,0x00,
    0x00,0x9c,0x8e,0x8f,0x28,	// 0x03d4
    0x40,0x96,0xb9,0xa3,0xff};

char mode_80x24x4[47]={
    0x0c,0x00,0x0f,0x08,0x00,	// 0x03c0
    0x67,			// 0x03c2
    0x03,0x00,0x03,0x00,0x02,	// 0x03c4
    0xff,0x00,			// 0x03c6,0x03da
    0x00,0x00,0x00,0x00,0x00,
    0x10,0x0e,0x00,0xff,	// 0x03ce
    0x5f,0x4f,0x50,0x82,0x55,
    0x81,0xbf,0x1f,0x00,0x4f,
    0x0d,0x0e,0x00,0x00,0x00,
    0x00,0x9c,0x8e,0x8f,0x28,	// 0x03d4
    0x0f,0x96,0xb9,0xa3,0xff};

const char DefPal[]=
    {	 0, 0, 0,	 0, 0,42,
	 0,42, 0,	 0,42,42,
	42, 0, 0,	42, 0,42,
	42,21, 0,	42,42,42,
	21,21,21,	21,21,63,
	21,63,21,	21,63,63,
	63,21,21,	63,21,63,
	63,63,21,	63,63,63	};

struct ModeDesc mode_lo={"320x200x256",
			(char*)&mode_320x200x8},
		mode_hi={"640x480x16",
			(char*)&mode_640x480x4},
		mode_txt={"80x24x16",
			(char*)&mode_80x24x4};

struct ModeDesc * Modes[]={&mode_txt,&mode_lo,&mode_hi};

void SetDefPal()
{
    SetVGAPal((char*)&DefPal,0,16);
}

void SetMode(int num)
{
    SetVGAMode(Modes[num]->Parameters);
}

void AROS_InfoText(int num, char * text)
{
    while(*text)
    {
	xputc(*text++,num);
    }
}
